<div class="container-fluid">

  <div class="row pt-3 pb-3 mb-3 border-bottom" style="background-color: white">
    <div class="col-7">
      <h2 style="display: table-cell; vertical-align: middle;">Mapping details</h2>
    </div>

    <div class="col-5" style="text-align: right">
      <a mat-stroked-button (click)="backToMappingList()">
        Mapping list
      </a>
    </div>

  </div>



  <div class="row mt-3 mb-5" *ngIf="!error && mapping">
    <div class="col-12">

      <mat-card class="mt-3 pb-4">
        <mat-card-content>
          <div class="row">

            <div class="col-12">

              <h2>{{ mapping.id }}</h2>

              

            </div>

            <div class="col-12 mb-5">
              <app-mapping-form [displayFormModes]="true" [disableFields]="['name']" 
                [mappingData]="mapping" (onDataChanged)="changedMapping($event)">
              </app-mapping-form>
            </div>

            <div class="col-12" *ngIf="notificationSaved">
              <pre class="text-wrap alert-success text-success p-2 rounded">
                <b>{{ notificationSaved }}</b>
              </pre>
            </div>
    
          </div>
        </mat-card-content>
      </mat-card>



    </div>


    <div class="col-12 mt-5">

      <mat-card class="pb-4">
        <mat-card-content>
          <div class="row">

            <div class="col-12">

              <h2>Test your mapping</h2>

              <h5 class="text-wrap text-primary" *ngIf="notificationSaved">
                <b>New</b>: Mapping changes detected and applied!
              </h5>
            </div>

            <div class="col-12">
              <playground-template [disabledArea]="true" [needBuilder]="false" [builder]="mapping.mappingProcessor" [mappingId]="mapping.id" [mapping]="mapping.body"></playground-template>
            </div>

          </div>
        </mat-card-content>
      </mat-card>

    </div>


  </div>


  <div class="row" *ngIf="error">
    <div class="col-12">
      <pre class="text-wrap rounded alert-danger p-2">{{ error }}</pre>

      <p class="card-subtitle mt-2">Go to <a routerLink="/mapping">Mapping List</a></p>
    </div>
  </div>



</div>
